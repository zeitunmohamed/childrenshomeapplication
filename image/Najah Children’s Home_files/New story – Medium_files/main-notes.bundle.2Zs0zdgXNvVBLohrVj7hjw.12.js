(function(z){
'use strict';var u8=function(a){return a.nu.best||null},MOa=function(a,b){this.user=a;this.quotes=b},v8=function(a){return z.G(a,"inResponseToMediaResource")},w8=function(a){return z.G(a,"mediumQuote")},x8=function(a){return a.ba?!!a.ba.ie().Cr():!1},NOa=function(a,b){a.OD=b;return a},OOa=function(a,b){a.yk=b;return a},y8=function(a,b){return u8(a)?z.fA(u8(a)).filter(function(a){return this.mP(a)==b},a):[]},POa=function(a,b,c){var d=a.T.N(z.rpa,{postId:b},{filter:c});return z.fI(a,d,function(){return this.Kb.Tl(d)})},
QOa=function(a,b){b=a.T.N(z.Ew,{postId:b});z.hha(a.Em);return!!a.Em.Dy[b]},z8=function(a,b){b=b.filter(function(a){return"anon"!=a.Sa()});b=z.db(b,function(a){return a.Sa()},a);return z.hb(b).map(function(a){return new MOa(a[0].mc(),a)},a)},ROa=function(a,b){var c=0;(a.By[b]||[]).forEach(function(a){"anon"==a.Sa()&&(c+=a.Yd())});return c},SOa=function(a,b,c){(0,z.eb)(a.ed,b,c)},TOa=function(a){return(0,z.v)("\x3c"+(a.W_?'span tabIndex\x3d"0" class\x3d"link"':'button class\x3d"button button--chromeless"')+
("page-level-recommends"==a.action?'data-action\x3d"show-recommends"':a.fz?'data-action\x3d"select-anchor" data-action-value\x3d"'+z.C(a.fz)+'"':"")+"\x3e"+z.w(a.text)+"\x3c/"+(a.W_?"span":"button")+"\x3e")},UOa=function(a){a=a||{};return(0,z.v)(a.B0?z.w(a.text):TOa(z.y({W_:!0},a)))},VOa=function(a,b,c){return(0,z.v)(z.OU(z.y({user:c.currentUser,type:"quoteResponses"},a),c))},A8=function(a,b){var c=a.vHa?a.social.user:a.social;a=""+(a.B0?z.w(a.social.name):z.w(z.fo({user:c},b)));return(0,z.v)(a)},
B8=function(a){return(0,z.v)("and\x26nbsp;"+UOa(z.y({text:(0,z.M)(""+(1==a.count?"1\x26nbsp;other":z.w(z.Wg(Number(a.count)))+"\x26nbsp;others"))},a)))},WOa=function(a){return(0,z.Yc)(z.EQ(a),function(a){return!!z.Ra(a.childNodes,z.rG)})},XOa=function(a){return(0,z.Yc)(z.AG(a),function(a){a=z.qQ(a);return!(2==a||1==a||12==a)})},ZOa=function(a){var b=z.qQ(a),c="DIV"==a.tagName&&z.Uc(a,"graf--"+z.Pu(14));return(!!YOa[a.tagName]||c)&&!!a.getAttribute("name")&&5!=b&&8!=b&&6!=b&&7!=b},C8=function(a){z.Hh.call(this);
this.s(a)},$Oa=function(a,b,c){return(0,z.v)(z.w(z.oF(null,c))+'\x3cmain class\x3d"u-backgroundGrayLightest u-minHeight100vh"\x3e\x3csection class\x3d"u-backgroundWhite u-paddingVertical40"\x3e\x3cdiv class\x3d"container u-maxWidth740 '+z.C(z.ip({Ra:"regular"}))+'"\x3e\x3cdiv class\x3d"u-maxWidth640"\x3e\x3cspan class\x3d"responsesStream-title"\x3e\x3cspan class\x3d"heading-title heading-title--semibold"\x3eShowing responses for:\x3c/span\x3e\x3c/span\x3e\x3ca href\x3d"'+z.C(z.E(z.Kl(a,0,c)))+'"\x3e\x3csummary class\x3d"u-flex u-marginVertical10 u-padding20 u-fontSize14 u-borderRadius3 u-borderCardBackground u-boxShadow1px4pxCardBorder"\x3e\x3cdiv class\x3d"u-flex1 u-noWrapWithEllipsis"\x3e\x3cdiv class\x3d"u-textDarker u-noWrapWithEllipsis"\x3e'+
z.w(a.post.title)+'\x3c/div\x3e\x3cdiv class\x3d"u-textColorNormal u-noWrapWithEllipsis"\x3e'+z.w(a.post.creator.name)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"u-flex0 u-marginLeft10"\x3e'+z.w(z.FR(a,c))+'\x3c/div\x3e\x3c/summary\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/section\x3e\x3csection class\x3d"js-responsesWrapper"\x3e\x3c/section\x3e\x3c/main\x3e')},aPa=function(a,b,c){b=a.post.virtuals.responsesCreatedCount>=c.j.Wja&&(a.post.creator.userId==c.currentUser.userId||(null==a.post.homeCollection?
null:null==a.post.homeCollection.virtuals?null:null==a.post.homeCollection.virtuals.permissions?null:a.post.homeCollection.virtuals.permissions.canManageAll));var d=z.y({oka:b},a),d=d||{},f=d.oka,d=z.v,g=(0,z.M)(""+z.w(z.KT()));c.supportsEdit&&f?(f={},f=f.l,f=""+z.w(z.Kn({Di:!0,action:"show-responses-stream-editor",l:z.B("js-showResponsesStreamEditorButton"+(f?" "+f:"")),K:(0,z.M)(""+z.w(z.Sua()))},c)),f=(0,z.v)(f)):f="";var d='\x3cdiv class\x3d"container u-maxWidth740"\x3e\x3cdiv class\x3d"responsesStreamWrapper u-maxWidth640 u-hide js-responsesStreamWrapper"\x3e'+
d('\x3cdiv class\x3d"container responsesStream-title u-paddingTop15"\x3e\x3cdiv class\x3d"row"\x3e'+z.w(z.bS({title:g,dA:!0,Cg:(0,z.M)(""+f)},c))+"\x3c/div\x3e\x3c/div\x3e"),k=z.y({Oc:b},a),g="",f="responsesStream-editor cardChromeless u-marginBottom20 u-paddingLeft20 u-paddingRight20 js-responsesStreamEditor"+(k.Oc?" u-hide":""),f=(0,z.M)(f);if(c.supportsEdit){f='\x3cdiv class\x3d"'+z.C(f)+'"\x3e';if(c.isAuthenticated)k=z.w(z.Xxa({ws:(0,z.M)(""+(k.post.virtuals.responsesCreatedCount?z.w(z.JT()):
z.w(z.Qwa())))},c));else{var m=k.sg,p='\x3cdiv class\x3d"'+z.C(z.B("u-paddingTop30 u-paddingBottom30 u-paddingLeft0 u-paddingRight0 u-borderBottomLightest js-responsesLoggedOutPrompt"))+'"\x3e',r=(0,z.M)(""+z.w(z.Wwa()));m?(k=(0,z.Jl)(z.E(z.Ll(c,"SHOW_STANDALONE_RESPONSES",null,null,null,k.post.id))),k=z.E(k)):k=z.E(z.Kl(z.y({uA:!0},k),0,c));k=""+(p+z.w(z.On({icon:r,da:!0,Kf:!0,bc:!0,Ve:(0,z.L)(""+k),text:(0,z.M)(""+z.w(z.JT())),l:"button--loggedOutPrompt",source:(0,z.M)(""+z.w(z.Hl({name:"logged_out_response_prompt",
susiEntry:c.j.ea.Cw}))),cs:!0},c))+"\x3c/div\x3e");k=(0,z.v)(k)}f=f+k+"\x3c/div\x3e"}else f="";g=(0,z.v)(g+f);d+=g;b?(b='\x3cdiv class\x3d"'+z.C(z.B("cardChromeless u-clearfix u-paddingTop25 u-paddingBottom25 u-paddingLeft20 u-paddingRight20 u-fontSize14 u-textColorNormal js-responseManagementCard"))+'"\x3e\x3cdiv class\x3d"u-size8of12"\x3e'+z.w(z.Vwa({l:"responsesIcon u-accentColor--iconLight u-verticalAlignMiddle u-marginRight10"}))+z.w(z.Owa({count:a.post.virtuals.responsesCreatedCount,GP:a.post.creator.userId==
c.currentUser.userId}))+'\x3c/div\x3e\x3cdiv class\x3d"u-size4of12"\x3e\x3cspan class\x3d"u-floatRight u-marginTop4 u-marginLeft10"\x3e',a=(0,z.L)(""+z.E((0,z.Jl)(z.E(z.Ll(c,"POST_INFO",a.post,null,null,null))))),g=z.n("Manage responses"),g=(0,z.v)(""+g),a=""+(b+z.w(z.N({href:a,K:(0,z.M)(""+z.w(g)),l:"link--accent u-accentColor--textNormal u-accentColor--textDarken"},c))+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"),a=(0,z.v)(a)):a="";a=d+a;b=z.v;d=z.n("Show all responses");d=(0,z.v)(""+d);c=b('\x3cdiv class\x3d"responsesStream js-responsesStream"\x3e\x3c/div\x3e\x3cdiv class\x3d"container u-hide js-showOtherResponses"\x3e\x3cdiv class\x3d"row"\x3e'+
z.w(z.Kn({action:"show-other-responses",K:(0,z.M)(""+z.w(d)),isPrimary:!0,l:"responsesStream-showOtherResponses cardChromeless u-width100pct u-marginVertical20 u-heightAuto"},c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"responsesStream js-responsesStreamOther"\x3e\x3c/div\x3e');return(0,z.v)(""+(a+c+"\x3c/div\x3e\x3c/div\x3e"))},bPa=function(a){return z.Xa(XOa(a),WOa(a))},cPa=function(a,b){z.zG(a,ZOa,z.Lb(b,z.Ib(!0)),void 0)},dPa=function(a){var b=z.az(z.Bha,{Cia:!0});b&&(b=b.split(/\s+/),b=b.filter(function(a){return!z.Ca(a)}),
b.length&&z.Wc(a,b))},ePa=function(){var a=z.n("Highlights");return(0,z.v)(""+a)},D8=function(a){z.Xz.call(this);this.Xb=a.get("dom-model-converter");this.KW={};this.GV={};this.cM={};this.O=a;this.qk=a.get("request");this.T=a.get("route-builder");this.ha=a.get("model-store");this.Ua="";this.gX=0;this.zU=!1;this.Uj=null},E8=function(a,b){var c=a.KW[b];c||(c=a.KW[b]=new z.$z,a.W("new_note_list",c,a));return c},fPa=function(a,b){if(!b)return!1;var c=b.fa();if(a.content==c.substring(a.startIndex,a.endIndex))return!0;
var d=new RegExp(z.Ha(a.content),"gi"),c=(b=d.exec(c))&&d.exec(c);return b&&!c?(c=a.endIndex-a.startIndex,a.startIndex=b.index,a.endIndex=b.index+c,a.content=b[0],!0):!1},F8=function(a,b,c){var d=b.oa(),f=b.Xe(),g=E8(a,b.wd()),k=g?g.indexOf(b):-1,m=b.Bz();b.Ks(c);"HIDDEN"==c?a.ha.remove(b):b=z.mC(a.ha,b);var p=g?g.indexOf(b):-1;return{Qu:a.qk.put(a.T.N(z.xna,{postId:d,noteId:f}),{state:c}),wA:function(){b.Ks(m);-1==p&&(-1==k?g.add(b):z.cA(g,b,k))}}},G8=function(a,b,c,d,f,g){var k=z.G(a.Rl(c,f),"replies"),
m=z.Qa(k,function(a){return a.Or()==b}),p=k[m];"HIDDEN"==g&&z.Va(k,m);c=a.T.N(z.yna,{postId:d,noteId:c,replyId:b});a=a.qk.put(c,{state:g});var r=z.Qa(k,function(a){return a.Or()==b});return{Qu:a,wA:function(){-1==r&&z.ab(k,m,0,p)}}},gPa=function(a,b,c){this.range=a;this.anchor=b;this.fz=b.getAttribute("name");this.highlight=c},H8=function(a){z.Q.call(this);this.Yb=a.get("element-tracker");this.jE=this.mM=null;this.HW=[];this.Wy=0;this.JN=hPa;this.MJ=this.NJ=null},iPa=function(a,b){return(0,z.Ic)(a.HW,
function(a){a=a.Cc();return z.lr(b,a)})},jPa=function(a){var b=z.CG(a.Yb,a.mM);a.MJ=z.hG(b)+b.kf();a.NJ=a.MJ-a.jE.kf()},kPa=function(a){return bPa(a.mM).map(function(b){return z.CG(a.Yb,b)})},I8=function(a,b){z.Q.call(this);this.O=a;this.Yb=a.get("element-tracker");this.$b=b;this.aX=this.$b.gC;this.eX=this.lM=null},lPa=function(a){this.DD=a},J8=function(a,b){return b?z.yT(a.DD,b):null},mPa=function(a,b,c){cPa(a.DD,function(a){var f=a.getAttribute("name");f&&b.call(c,a,f)})},nPa=function(a,b){return z.Df(a.DD,
b)?a.DD:null},K8=function(){var a=((z.Mp.location.hash||"").substr(1).split(".")[0]||"").split("-"),b=a[0],c=a[1]||null,d=a[2]||null;return c||d?{yO:d,k_:b,noteId:c,startIndex:a[3]||null,endIndex:a[4]||null}:{k_:b,noteId:null,yO:null,startIndex:null,endIndex:null}},M8=function(a){z.eq.call(this);var b=z.DP();this.Qy=b&&new L8(z.rP(b,!0),a);this.VJ=b&&new L8(z.rP(b,!1),a)},L8=function(a,b){this.fg=a;this.h8=b;this.sd=(this.jl=b=z.vS(a.node,b))&&b.getAttribute("name");this.PW=b?z.yS(a,b):-1},N8=function(a,
b,c,d,f){z.F0.call(this,a,b);this.Aa(new z.Z_(c));this.Aa(new z.U0(!1));this.Aa(new z.X0(a));this.Aa(new z.G0);this.Aa(new z.v1(a,!1,!1));this.Aa(new z.y1(d,!0));this.ii=!0;this.ej=d;this.qk=a.get("request");this.ta=a.get("dialog");this.DL=f;this.X()},oPa=function(){var a=z.n("Are you sure you want to report this note?");return(0,z.v)(""+a)},pPa=function(){var a=z.n("Report");return(0,z.v)(""+a)},qPa=function(){var a=z.n("Saving failed. You may be having connectivity issues or notes might be disabled on this post. Please try again.");
return(0,z.v)(""+a)},rPa=function(){var a=z.n("Yikes! Something happened and we couldn’t dismiss this note.");return(0,z.v)(""+a)},sPa=function(){var a=z.n("Yikes! Something happened and we couldn’t delete this note.");return(0,z.v)(""+a)},tPa=function(){var a=z.n("Yikes! Something happened and we couldn’t report this note.");return(0,z.v)(""+a)},uPa=function(){var a=z.n("Yikes! Something happened and we couldn’t report this reply.");return(0,z.v)(""+a)},vPa=function(){var a=z.n("Yikes! Something happened and we couldn’t delete this reply.");
return(0,z.v)(""+a)},wPa=function(){var a=z.n("The note has been dismissed.");return(0,z.v)(""+a)},xPa=function(){var a=z.n("The note has been deleted.");return(0,z.v)(""+a)},yPa=function(){var a=z.n("The reply has been deleted.");return(0,z.v)(""+a)},zPa=function(){var a=z.n("Write a note…");return(0,z.v)(""+a)},APa=function(){var a=z.n("Cancel");return(0,z.v)(""+a)},BPa=function(){var a=z.n("The note you’re looking for was deleted");return(0,z.v)(""+a)},O8=function(a,b,c,d,f){N8.call(this,a,b,f||
"Leave a note",400,d||null);this.Ua=c;this.T=a.get("route-builder");this.Pd=a.get("notes-data")},P8=function(a,b,c,d,f,g){N8.call(this,a,b,"Leave a reply…",200,d);this.T=a.get("route-builder");this.Pd=a.get("notes-data");this.Ua=c;this.zX=g||null;this.sd=f},DPa=function(a,b,c){var d='\x3cdiv class\x3d"quoteResponses js-quoteResponses"\x3e',f=a.quotes.length,g=a.responses.length||a.nS;b=a.notes.length||a.tH;if(f||g||b){if(f){var f='\x3cdiv class\x3d"quoteResponses-section"\x3e'+z.w(z.ZE({title:(0,z.M)(z.w(ePa())+
" ("+z.w(a.quotes.length)+")"),mh:!0},c)),k;k={A1:a.quotes,Uka:!0};for(var m='\x3cdiv class\x3d"js-quotesList"\x3e'+(k.Uka?"":z.w(z.ZE({title:(0,z.M)(""+z.w(ePa())),mh:!0,Cg:(0,z.M)(""+z.w(z.YE({href:(0,z.L)(""+z.E((0,z.Jl)("https://medium.com/the-story/introducing-highlights-a4df69e8ed43"))),moreText:(0,z.M)("Learn more"),Pa:!0},c)))},c))),p="list u-marginTop5 u-marginBottom15"+(k.A1.length?"":" u-hide"),p=(0,z.M)(p),m=m+('\x3cul class\x3d"'+z.C(p)+'"\x3e'),p=k.A1,r=p.length,A=0;A<r;A++){for(var D=
p[A],H="",P=D.quotes,R=P.length,S=0;S<R;S++)H+=""+P[S].quoteId+(S!=R-1?",":"");H=z.B(H);m+='\x3cli class\x3d"list-item list-item--inline u-border0" data-quote-ids\x3d"'+z.C(H)+'" data-quote-creator-id\x3d"'+z.C(D.user.userId)+'" data-action\x3d"highlight-quote" data-action-type\x3d"hover"\x3e'+z.w(z.Oo(z.y({user:D.user,zd:!0},k),c))+"\x3c/li\x3e"}k=(0,z.v)(m+"\x3c/ul\x3e\x3c/div\x3e");f=f+z.w(k)+"\x3c/div\x3e"}else f="";g?(g='\x3cdiv class\x3d"quoteResponses-section'+(a.nS?" is-withEditor":"")+'"\x3e'+
z.w(z.ZE({title:(0,z.M)(""+z.w(z.KT())),mh:!0},c)),a.nS&&c.supportsEdit&&c.isAuthenticated?(k={},k=(0,z.v)('\x3cdiv class\x3d"js-inlineNewPostControl inlineNewPostControl inlineNewPostControl--quoteResponses"\x3e'+z.OU(z.y({user:c.currentUser,isCollapsed:!0,pG:!0,type:"quoteResponses",ws:(0,z.M)(""+z.w(z.Pwa()))},k),c)+"\x3c/div\x3e"),k=z.w(k)):k="",g=g+k+CPa(a,0,c)+"\x3c/div\x3e"):g="";d+=f+g;if(a.tja&&b){d+='\x3cdiv class\x3d"quoteResponses-section quoteResponses-section--fullBleed u-paddingLeft0 u-paddingRight0"\x3e';
g=b="";f=a.post.homeCollection;f=a.post.creator.userId!=c.currentUser.userId?f?z.n("Private notes are visible to you, the author, and the editors of {$name}.",{name:z.w(f.name)}):z.n("Private notes are visible to you, the author, and the editors of any publication this story is added to."):f?z.n("Private notes are visible to you and the editors of {$name}.",{name:z.w(f.name)}):z.n("Private notes are visible to you and the editors of any publication this story is added to.");g+=f;g=(0,z.v)(g);g=""+
z.w(g);g=(0,z.M)(g);b+='\x3cspan data-tooltip\x3d"'+z.C(g)+'"\x3eWho can see this?\x3c/span\x3e';g={};g=(0,z.v)(z.an(z.y({name:"lock",size:"19px",content:(0,z.M)('\x3csvg class\x3d"svgIcon-use" width\x3d"19" height\x3d"19" \x3e\x3cpath d\x3d"M14 14.052a1 1 0 01-.992.998H5.992A.99.99 0 015 14.052v-4.004a1 1 0 01.992-.998h7.016a.99.99 0 01.992.998v4.004zM7 5.445C7 4.187 8.114 3.15 9.5 3.15c1.385 0 2.5 1.04 2.5 2.295V8.05H7V5.445zm6.008 2.605H13V5.445c0-1.822-1.578-3.295-3.5-3.295C7.577 2.15 6 3.618 6 5.445V8.05h-.008A2 2 0 004 10.048v4.004a1.99 1.99 0 001.992 1.998h7.016A2 2 0 0015 14.052v-4.004a1.99 1.99 0 00-1.992-1.998z" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
g)));g=(0,z.M)(""+z.w(g));f=z.n("Private notes");f=(0,z.v)(""+f);b={xka:g,title:(0,z.M)(""+z.w(f)),mh:!0,Cg:(0,z.M)(b),l:"heading--privateNotes"};b=(0,z.v)(z.WE(z.y({uj:(0,z.M)(""+z.XE(b,c)),ria:!0},b)));b=d+=z.w(b);d=""+('\x3cdiv class\x3d"privateNotes-list js-notesList'+(a.tH?" is-showingNoteEditor":"")+(0==a.notes.length?" is-empty":"")+'"\x3e');g=a.notes;f=g.length;for(k=0;k<f;k++)d+=Q8({note:g[k],post:a.post,OA:a.OA},0,c);a.tH?(g=a.post.creator,a="",g=c.currentUser.userId==g.userId?z.n("Leave yourself a note"):
z.n("Send {$name} a private note…",{name:z.w(g.name)}),a+=g,a=(0,z.v)(a),a='\x3cdiv class\x3d"privateNotes-actions js-noteActions"\x3e'+z.w(z.Ln({action:"show-note-editor",text:(0,z.M)(""+z.w(a)),l:"privateNotes-prompt"},0,c)),g=z.v,f='\x3cdiv class\x3d"privateNotes-editor"\x3e'+z.w(z.Po({user:c.currentUser,jf:!0},c))+'\x3cdiv class\x3d"js-noteEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonSet"\x3e',k=z.n("Send"),k=(0,z.v)(""+k),c=g(f+z.w(z.Ln({action:"save-note",isPrimary:!0,l:"js-saveNoteButton",
text:(0,z.M)(""+z.w(k))},0,c))+z.w(z.Ln({action:"hide-note-editor",text:(0,z.M)(""+z.w(APa()))},0,c))+"\x3c/div\x3e\x3c/div\x3e"),c=a+c+"\x3c/div\x3e"):c="";c=(0,z.v)(d+("\x3c/div\x3e"+c));d=b+('\x3cdiv class\x3d"quoteResponses-inner privateNotes"\x3e'+c+"\x3c/div\x3e\x3c/div\x3e")}}else 0<a.aw&&(d+='\x3cdiv class\x3d"quoteResponses-section quoteResponses-section--fullBleed quoteResponses-section--tips u-textAlignCenter u-paddingLeft0 u-paddingRight0"\x3e\x3cdiv class\x3d"quoteResponses-section--tipsInner u-alignMiddle"\x3e'+
z.w(z.On({Fc:!0,Pc:!0,da:!0,action:"previous-highlight-tip",icon:(0,z.M)(""+z.w(z.$wa())),title:(0,z.M)("Show previous tip")},c))+"\x3cdiv class\x3d'u-alignBlock quoteResponses-section--tipsContent u-paddingLeft20 u-paddingRight20 js-highlightTip'\x3e\x3c/div\x3e"+z.w(z.On({Fc:!0,Pc:!0,da:!0,action:"next-highlight-tip",icon:(0,z.M)(""+z.w(z.Zwa())),title:(0,z.M)("Show next tip")},c))+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");return(0,z.v)(d+"\x3c/div\x3e")},CPa=function(a,b,c){return(0,z.v)(z.w(z.$S({posts:a.responses,
source:"quoteResponses",aG:!0},0,c)))},Q8=function(a,b,c){var d,f=null==a.note.replies?null:a.note.replies.length,g=null==a.note.replyId,k=a.post.creator.userId==c.currentUser.userId,m=a.post.creator.userId==a.note.author.userId;d=a.note.author.userId==c.currentUser.userId;b=k||(null==a.post.homeCollection?null:a.post.homeCollection.virtuals.permissions.canEditPosts);var p=a.note.author.userId!=c.currentUser.userId,r=""+(g?"js-note-item"+(a.note.noteId?" js-note-"+a.note.noteId:""):"js-reply-item"+
(a.note.replyId?" js-reply-"+a.note.replyId:"")),r=z.B(r),r='\x3cdiv class\x3d"privateNotes-item '+z.C(r)+' js-note" data-note-id\x3d"'+z.C(a.note.noteId)+'"\x3e'+(g?z.w(z.Oo({user:a.note.author},c)):z.w(z.WR({user:a.note.author},c)))+'\x3cdiv class\x3d"privateNotes-authorLockup"\x3e\x3cdiv class\x3d"privateNotes-author"\x3e'+z.w(z.fo({user:a.note.author},c));g||!(k||d||(null==a.post.homeCollection?0:a.post.homeCollection.virtuals.permissions.canEditPosts))||m||a.k0?k="":(k=z.n("(Editor)"),k=(0,z.v)(""+
k),k='\x3cspan class\x3d"privateNotes-author--supplemental"\x3e '+z.w(k)+"\x3c/span\x3e");r=r+k+'\x3c/div\x3e\x3cdiv class\x3d"privateNotes-supplemental"\x3e'+z.w(z.$g(Number(a.note.createdAt),c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"privateNotes-content js-privateNotesContent"\x3e';k=c?c.authBaseUrl:"";k=(0,z.v)(z.cva(z.Ip(String(a.note.content),{rel:"nofollow noreferrer noopener",target:"_blank"}),k));k=z.w(k);m=String(k).replace(/(\r\n|\r|\n)/g,"\x3cbr\x3e");k=z.Wf(k,z.Zf)?(0,z.v)(m,z.Xf(k)):
m;r=r+k+"\x3c/div\x3e";p?(p=a.note,k=!!g,p=(0,z.v)(z.w(z.Ln({action:k?"report-note":"report-reply",actionValue:k?p.noteId:p.replyId,l:k?"js-reportNote":"js-reportReply",text:(0,z.M)("Report")},0,c)))):p="";d=""+(r+p+(d?EPa({note:a.note,isPrimary:g},c):""));if(g){d+='\x3cdiv class\x3d"privateNotes-replies'+(f?"":" is-empty")+' js-repliesList"\x3e';if(f)for(f=a.note.replies,g=f.length,p=0;p<g;p++)r=f[p],d+=Q8({note:r,post:a.post,k0:a.note.author.userId==r.author.userId},0,c);f=d;a.OA?(g=z.v,d='\x3cdiv class\x3d"privateNotes-editor privateNotes-editor--reply"\x3e'+
z.w(z.nS({user:c.currentUser,jf:!0},c))+'\x3cdiv class\x3d"js-replyEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonSet"\x3e',p=z.n("Send"),p=(0,z.v)(""+p),g=g(d+z.w(z.Ln({action:"save-reply",isPrimary:!0,text:(0,z.M)(""+z.w(p))},0,c))+z.w(z.Ln({action:"hide-reply-editor",text:(0,z.M)(""+z.w(APa()))},0,c))+"\x3c/div\x3e\x3c/div\x3e")):g="";g="\x3c/div\x3e"+g+'\x3cdiv class\x3d"privateNotes-actions'+(b?" privateNotes-actions--withDismiss":"")+' u-clearfix"\x3e';a.OA?(d=z.v,p=z.n("Reply"),p=(0,z.v)(""+
p),d='\x3cdiv class\x3d"u-floatLeft"\x3e'+d(z.w(z.Ln({isPrimary:!0,action:"show-reply-editor",l:"privateNotes-prompt",text:(0,z.M)(""+z.w(p))},0,c)))+"\x3c/div\x3e"):d="";d=f+(g+d+(b?'\x3cdiv class\x3d"u-floatRight"\x3e'+EPa({note:a.note,isPrimary:!0,V_:!0},c)+"\x3c/div\x3e":"")+"\x3c/div\x3e")}return(0,z.v)(d+"\x3c/div\x3e")},FPa=function(a,b,c){return(0,z.v)(z.w(z.Ln({isDisabled:!0,l:a.isPrimary?"js-reportedNote":"js-reportedReply",text:(0,z.M)("Reported")},0,c)))},EPa=function(a,b){var c=z.v,d=
a.isPrimary?a.note.noteId:a.note.replyId,f=a.V_?"dismiss-note":a.isPrimary?"delete-note":"delete-reply";a=a.V_?z.n("Dismiss note"):z.n("Delete");a=(0,z.v)(""+a);a=z.w(a);return c(z.w(z.Ln({actionValue:d,action:f,l:"privateNotes-delete js-deleteNote",text:(0,z.M)(""+a)},0,b)))},GPa=function(a,b,c){return(0,z.v)(0==a.bS?(1==a.aw?"People highlighted this passage. You can click on an existing highlight to add to it, like below:":z.w(a.aw)+" people highlighted this passage. You can click on an existing highlight to add to it, like below:")+
'\x3cimg class\x3d"quoteResponses-tipAnimation" src\x3d"'+z.C(z.Mg(z.Lm({imageId:"1*SyXCciYXeNpx4-GUAuh0XQ.gif"},0,c)))+'"\x3e':1==a.bS?'Or, select any passage to create your own highlight and tell the author and others what resonated with you:\x3cimg class\x3d"quoteResponses-tipAnimation" src\x3d"'+z.C(z.Mg(z.Lm({imageId:"1*dEp02HXMKtAeKxsV5MWqGg.gif"},0,c)))+'"\x3e':2==a.bS?z.w(z.Ln({text:(0,z.M)("Sign up and create a profile"),bc:!0,source:(0,z.M)(""+z.w(z.Hl({name:c.j.Md.r4,susiEntry:c.j.ea.xw}))),
l:"u-textUnderline"},0,c))+" so that you can save your highlights and share them with others.":"")},R8=function(a,b,c,d,f,g,k,m){z.Q.call(this);this.O=a;this.la=a.get("butter-bar");this.$b=b;this.sd=c;this.tl=f;this.ta=a.get("dialog");this.Vg=a.get("quotes-data");this.Pd=a.get("notes-data");this.Xg=a.get("responses-data");this.Z=a.get("request");this.T=a.get("route-builder");this.Bd=g;this.DL=d;this.CM=(this.zy=k)?k.un():null;this.be=this.gf=null;this.zh={};this.QV=!!z.Jk();this.SV=!!z.YQ();this.Ut=
this.QV&&this.SV&&x8(b);this.Pm=null;this.RC=0;this.mY=ROa(this.Vg,this.sd);this.Nq=m;this.Fa(this.Fm());this.OW=z.Jk()?2:3},HPa=function(a){a.eb(".js-block").forEach(function(a){this.wa(a,"mouseenter",this.B9,this);this.wa(a,"mouseleave",this.KN,this)},a)},IPa=function(a){a.eb(".js-note").forEach(function(a){this.wa(a,"mouseenter",this.z9,this);this.wa(a,"mouseleave",this.KN,this)},a)},JPa=function(a,b){var c=a.query(".js-note-"+b);a.zh[b]||(a.zh[b]=new P8(a.O,c.querySelector(".js-replyEditor"),
a.$b.oa(),b,a.sd),z.IA(a,a.zh[b],"saving",a.Zaa,a),z.IA(a,a.zh[b],"save",a.Xaa,a),z.IA(a,a.zh[b],"fail",a.daa,a));z.Vc(c,"is-noteEditorVisible");a.zh[b].focus()},KPa=function(a,b){var c=a.zh[b];c&&(c.Na()&&c.Gc(""),a=a.query(".js-note-"+b),z.Zc(a,"is-noteEditorVisible"))},LPa=function(a,b,c){var d=J8(a.Bd,a.sd);if(d){var f=[];a.Nq&&(f=a.Nq.quotes.map(function(a){return a.un()}));(0,z.ub)(d.querySelectorAll(".markup--quote"),function(a){var d=a.getAttribute("data-creator-ids").split(" "),d=z.Ua(d,
b);if(this.Nq)var m=a.getAttribute("name").split(" "),d=d&&(0,z.Ic)(m,z.Ua.bind(null,f));z.ad(a,"is-selected",c&&d)},a)}},S8=function(a){return(a=z.St(a,function(a){return z.Uc(a,"js-note-item")}))&&a.getAttribute("data-note-id")},MPa=function(a,b,c,d){b=new z.FI(b,300);b.Fa(c);b.subscribe("dismiss",d,a);b.X();return b},T8=function(a){var b=a.xb(),c=a.Yc();a=a.Rd();1<b.length&&(a=b[0].fa().length);var d=new z.vE;d.mm(b[0].getName());d.re(c);z.I(d,"endIndex",a);d.Gc(b[0].fa().substring(c,a));return d},
U8=function(a,b){b%=a.OW;0>b&&(b=a.OW-1);a.RC=b;(b=a.query(".js-highlightTip"))&&z.$y(b,GPa,{bS:a.RC,aw:a.mY})},V8=function(a,b,c,d){z.Q.call(this);this.Fa(this.Fm(d));this.kb=a.get("dom-monitor");this.$b=b;this.YV=!b.Ca().Jr()||b.Ub();this.Ua=b.oa();this.Bd=c;this.Vg=a.get("quotes-data");this.Xg=a.get("responses-data");this.Pd=a.get("notes-data");this.xq=null;this.Pf={}},NPa=function(a,b){b.forEach(function(a){a&&W8(this,a)},a)},W8=function(a,b){if(!a.xq)if(J8(a.Bd,b)){var c=OPa(a,b),c=PPa(a,c),
c=QPa(a,c),c=RPa(a,c);a.Pf[b]=c;SPa(a,b)}else delete a.Pf[b]},TPa=function(a,b){if(!a.xq){var c=a.Pf[b];if(c){var d=c.length,c=QPa(a,c),c=RPa(a,c);a.Pf[b]=c;d!=c.length?SPa(a,b):c.forEach(function(a){a.qb&&a.offsetTop&&(a.qb.style.top=a.offsetTop+"px")})}}},UPa=function(a,b,c){return z.Ra(a.Pf[b]||[],function(a){return a.qb==c})},OPa=function(a,b){var c=[];SOa(E8(a.Pd,b),function(a){var f=a.ev(),g;f?(g=this.Pd.EF(f),f=g.ya(),g=z.G(g,"endIndex")):(f=0,g=a.Na().length);c.push({anchor:b,startIndex:f,
endIndex:g,notes:[a],quotes:[],responses:[]})},a);if(a.YV)return c;(a.Vg.By[b]||[]).forEach(function(a){var f=VPa(a);c.push({anchor:b,startIndex:f.startIndex,endIndex:f.endIndex,notes:[],quotes:[a],responses:[]})},a);y8(a.Xg,b).forEach(function(a){var f=v8(a);f&&(f=w8(f)&&w8(f).Kk())&&(f=VPa(f),c.push({anchor:b,startIndex:f.startIndex,endIndex:f.endIndex,notes:[],quotes:[],responses:[a]}))},a);return c},PPa=function(a,b){var c=[];b.sort(function(a,b){return a.startIndex-b.startIndex});b.forEach(function(a){var b=
z.Qa(c,function(b){return b.endIndex>=a.startIndex-1&&b.startIndex<=a.endIndex+1});0<=b?this.cy(c[b],a):c.push(a)},a);return c},RPa=function(a,b){var c=[];b.forEach(function(a){if(a.offsetTop){var b=z.Qa(c,function(b){return 30>=Math.abs(b.offsetTop-a.offsetTop)});0<=b?this.cy(c[b],a):c.push(a)}},a);return c},SPa=function(a,b){a.eb(".js-paragraphControl-"+b).forEach(z.xf);a.Pf[b]=a.Pf[b].map(function(a){var b=WPa(this,a),b=z.bz(XPa,b);b.style.top=a.offsetTop+"px";a.qb=b;this.L().appendChild(a.qb);
z.Vc(b,"is-visible");return a},a)},WPa=function(a,b){var c=b.notes,d=b.responses,f=z8(a.Vg,b.quotes),g=d?d.length:0,k=c?c.length:0,m=0,p=0,r=0,A=!1,D=!1,H={},P={},R=z.Hk().userId,S=a.$b.Ca().ie().Sa();c.forEach(function(a){var b=a.AF();b&&((a=z.G(a,"replies"))&&a.forEach(function(a){k++;a.author&&(a.author.userId==R&&m++,a.author.social&&a.author.social.isFollowing&&(H[a.author.userId]=a.author),P[a.author.userId]=!0)}),P[b.userId]=!0,b.userId==R&&m++,b.userId==S?p++:r++,b.social&&b.social.isFollowing&&
(H[b.userId]=b))});f.forEach(function(a){a=a.user;P[a.userId]=!0;a.userId==R&&(A=!0);a.social&&a.social.isFollowing&&(H[a.userId]=a)});d.forEach(function(a){a=a.ie();P[a.userId]=!0;a.userId==R&&(D=!0);a.social&&a.social.isFollowing&&(H[a.userId]=a)});c=b.quotes.filter(function(a){return"anon"==a.Sa()});return{postId:a.Ua,fz:b.anchor,rja:k,Vja:g,As:D,ns:m,d1:p,sja:r,gIa:f.length,zs:A,P_:Object.keys(P).length,xha:z.hb(H),aw:c.length}},VPa=function(a){var b=a.Yc(),c=a.Rd();1<a.paragraphs.length&&(c=
a.paragraphs[0].text.length);return{startIndex:b,endIndex:c}},QPa=function(a,b){var c=z.oz();return b.map(function(a){var b=this.Bd.get(a.anchor),g=this.$b.Gh(b);if(!g)return a;var k;4==g.type&&(g.fa()&&(k=b.querySelector("figcaption")),k||(k=b));if(!k){g=a.startIndex+1;b=[b];k=0;for(var m=null;0<b.length&&k<g;)if(m=b.pop(),!(m.nodeName in z.Bva))if(3==m.nodeType){var p=m.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");k+=p.length}else if(m.nodeName in z.WS)k+=z.WS[m.nodeName].length;else for(p=
m.childNodes.length-1;0<=p;p--)b.push(m.childNodes[p]);k=m}g=z.rz(k,!0);a.offsetTop=Math.round(g.top+c.top);return a},a)},XPa=function(a,b,c){b=z.v;var d='\x3cdiv class\x3d"paragraphControls js-paragraphControl js-paragraphControl-'+z.C(a.fz)+' u-noUserSelect"\x3e',f=z.v,g;if(a.rja||a.Vja){g='\x3cdiv class\x3d"notesMarker u-noUserSelect" data-action\x3d"select-anchor" data-action-value\x3d"'+z.C(a.fz)+'"\x3e';var k;k={};k=(0,z.v)(z.an(z.y({name:"asteriskFilled",size:"19px",content:(0,z.M)('\x3csvg class\x3d"svgIcon-use" width\x3d"19" height\x3d"19" \x3e\x3cpath d\x3d"M14.78 8.07a8.681 8.681 0 00-.427-1.383.478.478 0 00-.584-.27l-3.12.77V4.034c0-.247-.19-.48-.43-.5a7.23 7.23 0 00-1.38 0c-.24.02-.43.253-.43.5V7.19L5.3 6.415a.48.48 0 00-.583.27c-.18.448-.324.91-.426 1.383-.05.24.1.5.32.58l3.06.754-1.98 2.956c-.14.196-.13.502.04.67.34.332.7.632 1.09.896.2.136.49.077.63-.117l2.09-3.114 2.09 3.112c.15.193.43.252.63.116.39-.26.75-.56 1.09-.89.17-.17.19-.47.04-.67L11.4 9.41l3.06-.76a.517.517 0 00.32-.58" fill-rule\x3d"evenodd"/\x3e\x3c/svg\x3e')},
k)));g=g+z.w(k)+"\x3c/div\x3e"}else g="";var m;k=""+(1==a.ns?"a note":"notes");k=z.B(k);m=""+(1==a.P_&&(0<a.ns||a.zs||a.As)?0<a.ns&&a.zs&&a.As?" highlighted, responded, and left "+k:0<a.ns&&a.As?" responded and left "+k:0<a.ns&&a.zs?" highlighted and left "+k:a.zs&&a.As?" highlighted and responded":a.zs?" highlighted":0<a.ns?" left "+k:a.As?" responded":"":"");m=z.B(m);k='\x3cspan class\x3d"paragraphControls-itemText"\x3e';if(0<a.d1&&0==a.sja&&!a.zs&&!a.As)c=1==a.d1?"Note to self":"Notes to self";
else{var p=z.y({social:a.xha,isActive:0<a.ns||a.zs||a.As,Oh:a.P_,B0:!0,yja:!0,zZ:(0,z.M)(""+(0<a.aw?"Top highlight":""))},a),r="",A=""+(p.mHa?"you":"You"),A=(0,z.M)(A),D=null==p.social?null:p.social[0],H=null==p.social?null:p.social[1];p.isActive?r+=1==p.Oh?z.w(A):D?2==p.Oh?z.w(A)+" and\x26nbsp;"+A8(z.y({social:D},p),c):2<p.Oh?z.w(A)+", "+A8(z.y({social:D},p),c)+", "+B8(z.y({count:p.Oh-2},p)):"":z.w(A)+" "+B8(z.y({count:p.Oh-1},p)):1==p.Oh&&D?r+=A8(z.y({social:D},p),c):2==p.Oh&&D&&H?r+=A8(z.y({social:D},
p),c)+" and\x26nbsp;"+A8(z.y({social:H},p),c):3<=p.Oh&&D&&H&&p.sIa?r+=A8(z.y({social:D},p),c)+", "+A8(z.y({social:H},p),c)+", "+B8(z.y({count:p.Oh-2},p)):2<=p.Oh&&D?r+=A8(z.y({social:D},p),c)+" "+B8(z.y({count:p.Oh-1},p)):p.Oh&&!p.yja?(c=""+(1<p.Oh?z.w(p.Oh)+"\x26nbsp;people":"1\x26nbsp;person"),c=(0,z.M)(c),r+=UOa(z.y({text:c},p))):p.zZ&&(r+=z.w(p.zZ));c=(0,z.v)(r);c=z.w(c)+z.w(m)}c=(0,z.M)(""+c);k+=z.w(TOa(z.y({text:c},a)))+"\x3c/span\x3e";a=(0,z.v)(k);a=f(g+a);return b(d+a+"\x3c/div\x3e")},X8=
function(a,b,c){z.Q.call(this);this.O=a;this.ua=a.get("app");this.la=a.get("butter-bar");this.j8=a.get("floating-components");this.xa=a.get("screen");this.Oa=a.get("screen-service");this.kb=a.get("dom-monitor");this.$b=b;this.Sw=b.Sw;this.gC=this.Sw.querySelector(".js-postField");this.$W=this.xa.L().querySelector(".js-notesPositionContainer");this.Vg=a.get("quotes-data");this.Pd=a.get("notes-data");this.Pd.subscribe("new_note_list",this.zaa,this);this.Xg=a.get("responses-data");this.Wi=null;this.Bd=
new lPa(this.Sw.querySelector(".js-notesSource"));this.ay=this.Pf=this.lE=null;this.Pf=new V8(a,b,this.Bd,this.$W);this.track(this.Pf);this.ay=this.Pf.L();this.Rw=this.lL=null;this.od=c},Z8=function(a,b){if(a.isActive()){var c=(b=b||a.lL)&&b.k_,d=b&&b.noteId;c&&(a.Ky(c),b=d&&a.Pd.Rl(d,c),d&&b&&a.Rw&&z.t(a.Rw,function(){return Y8(a,c,null,d)}),d&&(!b||0<b.removedAt||!J8(a.Bd,c))&&a.la.X(BPa(),{type:z.IC}));z.KB(a.ua,"")}else a.lL=b||null},Y8=function(a,b,c,d,f,g){var k={tia:!0,$P:767>=window.innerWidth};
a.IM();c=new R8(a.O,a.$b,b,d||"",c||null,a.Bd,f||null,g||null);c.subscribe("set-active-highlight",a.MX,a);c.subscribe("reset-highlight",a.cda,a);c.subscribe("close",a.IM,a);b=g&&g.qb?g.qb:a.Bd.get(b);k=z.CI(OOa(z.BI(a.j8),b).fw(c),k).MH(a.pk.bind(a));k.eE=!0;a.Wi=k.X()},YPa=function(a,b,c){var d=a.$b.Gh(J8(a.Bd,b));if(d&&4!=d.type){z.xu(d,4);if(c){if(!fPa(c,d))return;z.vu(d,z.gu(c.startIndex,c.endIndex,c.id))}c=a.$b.Ub();var f=a.$b.Ca();c={mode:c?"edit":"view",Jh:z.AR(f),media:null,Ji:null,sections:!0,
Nh:!1,oi:!1,fe:!1,postId:f.id};a=a.Bd.get(b);d=z.kv(new z.Vu(z.Ck,c),d,void 0);a.innerHTML=d}},ZPa=function(a,b){var c=z.DP();if(!c||c.isCollapsed())if(b&&(c=b),!c||c.isCollapsed())return null;b=c.he();var d=nPa(a.Bd,b);if(!d)return null;a=(b=z.St(b,ZOa,d))&&a.$b.Gh(b);if(!b)return null;var d=z.yS(z.rP(c,!0),b),f=z.yS(z.rP(c,!1),b);return-1==d||-1==f?null:new gPa(c,b,new z.vE({anchor:b.getAttribute("name"),startIndex:d,endIndex:f,content:a.fa().substring(d,f)}))},$Pa=function(){},$8=function(a,b){z.Q.call(this);
this.Uf=b||aPa;this.Fb=a.get("screen-request");this.ba=null;this.SN=a.get("screen-view-state");this.O=a;this.RX=this.iN=!1;this.aM=this.gf=null;this.Um=!1},a9=function(a){z.Q.call(this);this.nX=a||null},b9=function(a,b,c,d,f){z.Q.call(this);this.O=a;this.lca=b;this.$b=c;this.Rca=null!=d?d:!0;this.Fb=a.get("screen-request");this.qy=this.FX=this.Yg=this.Od=null;new a9;this.Oca=f;this.Um=!1},aQa=function(a){a.Yg&&(z.GQ(a,a.Yg),z.gq(a.Yg),a.Yg=null);var b=a.query(".js-responsesWrapper");return a.$b.isPublished()&&
b?z.t(a.O.load("responses-stream-control"),function(c){a.Yg=c;a.FX&&a.Yg.pH(a.FX);a.Yg.Fa(b);a.Yg.Ha(a.$b.Ca());a.Yg.iN=a.qy?"respond"===a.qy.yO:!1;a.Yg.RX=a.qy?"responses"===a.qy.yO:!1;a.Yg.wR(a.Um);a.track(a.Yg);return a.Yg}):z.Mc(null)},cQa=function(a){a.Rca&&z.u(z.t(z.t(QOa(a.Fb,a.lca)?z.Mc(!0):a.EU(500),function(){return aQa(a)}),function(){a.W(bQa)}),z.Qz)},c9=function(a,b,c){z.wU.call(this,a,b,c,C8,$Oa);this.Ua=b.postId;this.iu=this.$b=this.ba=null};
z.X1.prototype.pH=z.Z(624,function(a){this.Uf=a;return this});z.F0.prototype.iH=z.Z(622,function(a){a!=this.dD&&this.field&&(this.field.Mf.contentEditable=a);this.dD=a});z.AI.prototype.MH=z.Z(610,function(a){this.pk=a;return this});z.LI.prototype.MH=z.Z(609,function(a){this.pk=a;return this});z.nI.prototype.mP=z.Z(608,function(a){a=v8(a);if(!a)return null;a=w8(a)&&w8(a).Kk();return a?(a=a.xb())&&a.length?a[0].getName():null:null});z.yE.prototype.Rl=z.Z(560,function(){return z.G(this,"note")});
z.cI.prototype.Rl=z.Z(559,function(a){return this.Bb("Note",a)});z.tE.prototype.Or=z.Z(558,function(){return z.G(this,"replyId")});z.yE.prototype.Or=z.Z(557,function(){return z.G(this,"replyId")});z.rE.prototype.Hs=z.Z(556,function(a){return z.I(this,"highlight",a)});z.rE.prototype.EF=z.Z(555,function(){return z.G(this,"highlight")});z.rE.prototype.Ds=z.Z(554,function(a){return z.I(this,"author",a)});z.tE.prototype.Ds=z.Z(553,function(a){return z.I(this,"author",a)});
z.rE.prototype.AF=z.Z(552,function(){return z.G(this,"author")});z.tE.prototype.AF=z.Z(551,function(){return z.G(this,"author")});z.rE.prototype.ev=z.Z(550,function(){return z.G(this,"highlightId")});z.rE.prototype.Xe=z.Z(549,function(){return z.G(this,"noteId")});z.tE.prototype.Xe=z.Z(548,function(){return z.G(this,"noteId")});z.yE.prototype.Xe=z.Z(547,function(){return z.G(this,"noteId")});z.SP.prototype.Ks=z.Z(544,function(a){return z.I(this,"state",a)});
z.rE.prototype.Ks=z.Z(543,function(a){return z.I(this,"state",a)});z.tE.prototype.Ks=z.Z(542,function(a){return z.I(this,"state",a)});z.tl.prototype.Sn=z.Z(461,function(a){return z.I(this,"authorId",a)});z.jM.prototype.Sn=z.Z(460,function(a){return z.I(this,"authorId",a)});z.rE.prototype.Sn=z.Z(459,function(a){return z.I(this,"authorId",a)});z.tE.prototype.Sn=z.Z(458,function(a){return z.I(this,"authorId",a)});z.bi.prototype.OF=z.Z(102,function(){return z.G(this,"point")});
z.Vh.prototype.Cr=z.Z(77,function(){return z.G(this,"allowNotes")});z.ck.prototype.Cr=z.Z(76,function(){return z.G(this,"allowNotes")});z.Xk.prototype.Cr=z.Z(75,function(){return z.G(this,"allowNotes")});var YOa={BLOCKQUOTE:!0,PRE:!0,P:!0,H1:!0,H2:!0,H3:!0,H4:!0,FIGURE:!0,LI:!0};z.q(C8,z.Hh);z.e=C8.prototype;z.e.D=function(){return""};z.e.F=function(){return""};z.e.Ca=function(){return z.G(this,"post")};z.e.Ha=function(a){return z.I(this,"post",a)};z.e.G=function(){return C8.prototype};
z.e.C={name:"ShowStandaloneResponsesResponse",H:!1,fields:{post:{name:"post",g:function(){return z.bk},h:1}},J:{}};z.q(D8,z.Xz);z.e=D8.prototype;z.e.load=function(a){if(!z.Jk())return z.Mc([]);this.Ua=a;this.Uj||(this.Uj=z.u(z.t(this.qk.get(this.T.N(z.una,{postId:a}),{background:!0}),this.uca,this),z.Qz));return this.Uj.lc()};z.e.dm=function(){return this.zU};z.e.zj=function(){return this.gX};z.e.EF=function(a){return this.GV[a]||null};z.e.Rl=function(a,b){return z.IQ(E8(this,b),a)};
z.e.Hs=function(a,b){this.GV[a]=b};z.e.oa=function(){return this.Ua};
z.e.uca=function(a){var b=a.references.User;this.gX=a.post.visibility;var c=a.value;if(c)for(var d=0;d<c.length;d++){var f=c[d];if("HIDDEN"!=f.state){var g=f.replies;if(g)for(var k=0;k<g.length;k++){var m=g[k],p=m.authorId||null;m.author=p&&b[p]||null}g=f.anchor;k=f.authorId||null;f.author=k&&b[k]||null;g=E8(this,g);f=z.sE(f);g.add(z.mC(this.ha,f))}}if(a=a.highlights)for(b=0;b<a.length;b++)this.Hs(a[b].id,z.Ph.rb(z.vE,a[b]));this.zU=!0};z.l(H8,z.Q);H8.prototype.R=function(){z.Q.prototype.R.call(this);this.HW=kPa(this);this.jE=z.CG(this.Yb,this.L(),"fixed");z.IA(this,this.Yb,"refresh",this.X2.bind(this));var a=this.L();z.Wc(a,["u-fixed","u-transition--fadeOut300"]);z.nr(a,"transform","translateY("+this.JN+"px)");jPa(this);this.X2()};
H8.prototype.X2=function(){jPa(this);var a=this.jE.Cc(),a=a.top+a.height;z.HG(this.Yb).top+this.JN<=this.NJ?(a=this.L(),z.cU(a,"u-absolute","u-fixed"),z.nr(a,"transform","translateY("+this.JN+"px)")):a>=this.MJ&&this.LJ();var a=this.jE.Cc(),b=z.HG(this.Yb);b.height<dQa||this.Wy>b.top||iPa(this,a)?this.QC():z.cU(this.L(),"u-transition--fadeOut300","u-transition--fadeIn300")};H8.prototype.QC=function(){z.cU(this.L(),"u-transition--fadeIn300","u-transition--fadeOut300")};
H8.prototype.LJ=function(){var a=this.L();z.cU(a,"u-fixed","u-absolute");z.nr(a,"transform","translateY("+this.NJ+"px)")};var hPa=150,dQa=400;z.l(I8,z.Q);I8.prototype.R=function(){z.Q.prototype.R.call(this);this.lM=z.CG(this.Yb,this.aX);if(this.$b.isPublished()&&this.lM.kf()>eQa){var a=z.HQ(this,".js-postShareWidget"),a=(new H8(this.O)).Fa(a);a.mM=this.aX;a.Wy=z.hG(this.lM);this.eX=a;this.track(this.eX)}};var eQa=300;lPa.prototype.get=function(a){return J8(this,a)};z.q(M8,z.lq);M8.prototype.vA=function(){if(!this.Qy)return null;var a=this.Qy.OF();if(!a)return null;var b=this.VJ.OF();return b?z.Rq(a.node,a.offset,b.node,b.offset):null};L8.prototype.OF=function(){var a=window.document.body;return z.Df(a,this.fg.node)?this.fg:this.jl&&z.Df(a,this.jl)?z.lT(this.PW,this.jl):this.sd&&(a=z.yT(this.h8,this.sd))?z.lT(this.PW,a):null};z.q(N8,z.F0);z.e=N8.prototype;z.e.Hy=!1;z.e.Qt="";z.e.Iy=0;z.e.In=z.V;z.e.Xe=function(){return this.DL};z.e.save=function(){this.Na().length<=this.ej&&this.qu()};z.e.ib=function(){(0,window.clearTimeout)(this.Iy);N8.V.ib.call(this)};
z.e.R=function(){function a(a){a.stopPropagation()}N8.V.R.call(this);this.Qt=this.Na();this.Gc(this.Qt);this.Xo(13,this.GL,this);this.Xo(27,this.HL,this);this.field.wa("blur",this.FL,!1,this);var b=this.field.qa();z.ez(b,"keydown",a);z.ez(b,"keyup",a);z.ez(b,"keypress",a)};z.e.UQ=function(a){return a};
z.e.qu=function(){if(this.isEnabled()){var a=this.Na().trim();if(a){this.iH(!1);var b=this.h_(),a=this.g_(a);this.W("saving",a);z.Ec(z.u(z.t(this.qk.post(b,a.Qb()),this.Daa,this),this.Baa.bind(this,a)),this.iH.bind(this,!0))}}};z.e.Daa=function(a){this.W("save",this.UQ(a.value))};z.e.Baa=function(a,b){this.W("fail",a);this.ta.error(qPa());z.Qz(b)};z.e.GL=function(a){if(this.Wo&&z.a1(this.Wo))return!1;a.shiftKey||(a.preventDefault(),this.save());return!0};
z.e.HL=function(a){if(this.Wo&&z.a1(this.Wo))return!1;a.preventDefault();this.Gc(this.Qt);this.W("cancel");return!1};z.e.FL=function(){this.Hy&&(this.Na().length>=this.ej?(0,window.confirm)(this.i_())?(this.Gc(this.Qt),this.W("cancel")):this.focus():this.Iy=(0,window.setTimeout)(this.qu.bind(this),100))};z.q(O8,N8);z.e=O8.prototype;z.e.VI=null;z.e.cU=null;z.e.WI=null;z.e.tl=null;z.e.HK=null;z.e.GK=null;z.e.FV=null;z.e.Hs=function(a){this.tl=a;this.HK=a.startIndex;this.GK=a.endIndex;this.FV=a.content;return this};z.e.i_=function(){var a=z.n("Your note is too long; do you want to abandon your changes?");return(0,z.v)(""+a)};z.e.UQ=function(a){var b=z.Yy();a=z.sE(a).Ds(b).Sn(b.Sa());this.tl&&a.ev()&&this.Pd.Hs(a.ev(),this.tl);var b=this.Pd,c;c=z.mC(b.ha,a);E8(b,c.wd()).add(c);return a};
z.e.h_=function(){return this.Xe()?this.T.N(z.jpa,{postId:this.Ua,noteId:this.Xe()}):this.T.N(z.vna,{postId:this.Ua})};z.e.g_=function(a){var b=z.Yy();a=(new z.rE({content:a,anchor:this.VI,anchorContent:this.cU,anchorImage:this.WI?this.WI.Qb():null,replies:[],createdAt:Date.now()})).Ds(b);null!=this.HK&&null!=this.GK&&(b=new z.vE({anchor:this.VI,startIndex:this.HK,endIndex:this.GK,content:this.FV}),a.Hs(b));return a};z.q(P8,N8);P8.prototype.i_=function(){var a=z.n("Your reply is too long; do you want to abandon your changes?");return(0,z.v)(""+a)};P8.prototype.UQ=function(a){var b=z.Yy();a=z.uE(a).Ds(b).Sn(b.Sa());z.G(this.Pd.Rl(a.Xe(),this.sd),"replies").push(a);return a};P8.prototype.h_=function(){return this.zX?this.T.N(z.kpa,{postId:this.Ua,noteId:this.Xe(),replyId:this.zX}):this.T.N(z.wna,{postId:this.Ua,noteId:this.Xe()})};
P8.prototype.g_=function(a){var b=z.Yy();return(new z.tE({replyId:"",postId:this.Ua,noteId:this.Xe(),content:a,createdAt:Date.now()})).Ds(b)};z.q(R8,z.Q);z.e=R8.prototype;
z.e.R=function(){R8.V.R.call(this);z.O(this.L()).S("show-note-editor",this.lN,this).S("hide-note-editor",this.FK.bind(this,!0)).S("show-reply-editor",this.Xda,this).S("hide-reply-editor",this.x9,this).S("save-note",this.oda,this).S("save-reply",this.pda,this).S("highlight-quote",this.A9,this).S("dismiss-note",this.FU.bind(this,!0),this).S("delete-note",this.FU.bind(this,!1),this).S("delete-reply",this.A7,this).S("report-note",this.Wca,this).S("report-reply",this.Xca,this).S("previous-highlight-tip",this.sca,
this).S("next-highlight-tip",this.u$,this);IPa(this);this.Xg&&u8(this.Xg)&&(HPa(this),z.IA(this,u8(this.Xg),"add",this.Aaa,this));if(this.CM&&this.QV&&this.SV){var a=this.query(".js-inlineNewPostControl"),b=this.CM,c=this.$b.oa(),d=new z.X1(this.O);d.jH("web-inline-quote-responses");d.Fa(a);d.BC=!0;d.GU=!0;d.GJ=!0;d.pH(VOa);d.Pt=b;d.EA(c);z.Y1(d,!0);this.gf=d;this.gf.X();a=T8(this.zy);this.W("set-active-highlight",this.sd,a)}this.tl&&(this.lN(),this.be&&this.be.focus());U8(this,0)};
z.e.ma=function(){this.Pm&&this.Pm.KO();(this.tl||this.zy)&&this.W("reset-highlight",this.sd,null);R8.V.ma.call(this)};z.e.ib=function(){z.tA(this.L());z.xf(this.L());z.gq(this.gf);z.gq(this.be);z.gq(this.Pm);z.hq(z.hb(this.zh));this.Pm=this.zh=this.be=this.gf=null;R8.V.ib.call(this)};z.e.Wl=function(){if(this.be&&this.be.Na())return!0;for(var a=z.hb(this.zh),b=0;b<a.length;b++)if(a[b]&&a[b].Na())return!0;return this.gf&&!this.gf.isDismissable()?!0:!1};
z.e.Fm=function(){var a=[],b=[],c=[],d=this.Ut&&(this.tl||this.zy);d||(this.Nq?(a=this.Vg?z8(this.Vg,this.Nq.quotes):[],b=this.Nq.notes,c=this.Nq.responses):(b=this.Pd?z.fA(E8(this.Pd,this.sd)):[],this.DL||(this.Vg?(a=this.Vg,a=z8(a,a.By[this.sd]||[])):a=[],c=this.Xg?y8(this.Xg,this.sd):[])));return z.bz(DPa,{post:this.$b.Ca(),quotes:a,notes:b,responses:c,nS:!!this.CM,tH:d,OA:this.Ut,aw:this.mY,tja:x8(this.$b)})};
z.e.Aaa=function(){var a=this.query(".js-postList"),b=z.bz(CPa,{responses:y8(this.Xg,this.sd)});z.yf(b,a);HPa(this)};
z.e.lN=function(){if(this.Ut){if(!this.be){var a=this.query(".js-noteEditor"),b=z.az(zPa),a=this.be=new O8(this.O,a,this.$b.oa(),null,b),b=this.sd,c=this.$b.Gh(this.Bd.get(this.sd)),d=c.fa(),c=4==c.type?c.Wc():null;a.VI=b;a.cU=d;a.WI=c;(a=this.tl)&&this.be.Hs(a);z.IA(this,this.be,"saving",this.Yaa,this);z.IA(this,this.be,"fail",this.caa,this);z.IA(this,this.be,"save",this.Waa,this)}z.Vc(this.query(".js-noteActions"),"is-noteEditorVisible");this.be&&this.be.focus()}};z.e.oda=function(){this.be&&this.be.save()};
z.e.Yaa=function(a){this.be.Gc("");var b=this.query(".js-notesList");a={note:a,post:this.$b.Ca(),tH:this.Ut,OA:this.Ut};a=z.bz(Q8,a);b.appendChild(a);z.Zc(b,"is-empty");IPa(this);this.FK()};z.e.Waa=function(a){var b=this.query(".js-notesList").lastChild;a=a.Xe();z.Vc(b,"js-note-"+a);b.setAttribute("data-note-id",a);(b=b.querySelector(".js-deleteNote"))&&b.setAttribute("data-action-value",a)};z.e.caa=function(){var a=this.query(".js-notesList");a.removeChild(a.lastChild);z.Vc(a,"is-empty");this.lN()};
z.e.FK=function(a){a?this.W("close"):this.be&&(this.be.Na()&&this.be.Gc(""),z.Zc(this.query(".js-noteActions"),"is-noteEditorVisible"))};z.e.Xda=function(a){(a=S8(a.target))&&this.Ut&&JPa(this,a)};z.e.pda=function(a){a=S8(a.target);(a=this.zh[a])&&a.save()};
z.e.Zaa=function(a){var b=a.Xe();this.zh[b]&&this.zh[b].Gc("");var c=this.Pd.Rl(b,this.sd).author.userId==a.author.userId,d=this.query(".js-note-"+a.Xe()+" .js-repliesList");a={note:a,post:this.$b.Ca(),k0:c};a=z.bz(Q8,a);d.appendChild(a);z.Zc(d,"is-empty");KPa(this,b)};z.e.Xaa=function(a){var b=this.query(".js-note-"+a.Xe()).querySelector(".js-repliesList").lastChild;a=a.Or();z.Vc(b,"js-reply-"+a);(b=b.querySelector(".js-deleteNote"))&&b.setAttribute("data-action-value",a)};
z.e.daa=function(a){var b=this.query(".js-note-"+a.Xe()+" .js-repliesList");b.removeChild(b.lastChild);z.Vc(b,"is-empty");JPa(this,a.Xe())};z.e.x9=function(a){(a=S8(a.target))&&KPa(this,a)};z.e.A9=function(a){a=a.target;var b=a.getAttribute("data-quote-creator-id"),c=J8(this.Bd,this.sd);c&&(this.Pm&&this.Pm.KO(),this.Pm=MPa(this,c,a,function(){LPa(this,b,!1);z.gq(this.Pm);this.Pm=null}),LPa(this,b,!0))};
z.e.z9=function(a){var b=J8(this.Bd,this.sd);(a=this.Pd.Rl(a.target.getAttribute("data-note-id"),this.sd))&&b&&(b=(b=a.ev())?this.Pd.EF(b):null,this.W("set-active-highlight",this.sd,b))};z.e.B9=function(a){var b=J8(this.Bd,this.sd),c=this.Xg;a=a.target.getAttribute("data-post-id");c=u8(c)?z.IQ(u8(c),a):null;b&&c&&(b=v8(c))&&(b=w8(b)&&w8(b).Kk())&&(c=b.xb())&&c.length&&(b=T8(b),this.W("set-active-highlight",this.sd,b))};
z.e.KN=function(){var a=null;this.zy&&(a=T8(this.zy));this.tl&&(a=this.tl);this.W("reset-highlight",this.sd,a)};
z.e.FU=function(a,b){b=b.value;var c=this.Pd.Rl(b,this.sd),d=this.query(".js-note-"+b);if(c&&d){z.Xt(d);this.KN();this.eb(".js-note-item").every(function(a){return z.Uc(a,"u-hide")})&&this.FK(!0);var f=F8(this.Pd,c,"HIDDEN");z.u(f.Qu,function(b){this.la.X(a?rPa():sPa(),z.IC);f.wA();z.Yt(d);(400>b.status||499<b.status)&&F8(this.Pd,c,"NEW")},this);z.t(this.la.X(a?wPa():xPa(),{type:z.BC,bw:!0}),function(){this.la.Bc();f.wA();F8(this.Pd,c,"NEW");z.Yt(d)},this)}};
z.e.A7=function(a){var b=a.value,c=this.query(".js-reply-"+b),d=S8(a.target);if(d&&c){z.Xt(c);var f=G8(this.Pd,b,d,this.$b.oa(),this.sd,"HIDDEN");z.u(f.Qu,function(){this.la.X(vPa(),z.IC);f.wA();z.Yt(c);G8(this.Pd,b,d,this.$b.oa(),this.sd,"")},this);z.t(this.la.X(yPa(),{type:z.BC,bw:!0}),function(){this.la.Bc();f.wA();G8(this.Pd,b,d,this.$b.oa(),this.sd,"");z.Yt(c)},this)}};
z.e.Wca=function(a){var b=this,c=oPa(),d=pPa();z.t(this.ta.hp(c,null,d),function(){var c=a.target,d=z.bz(FPa,{isPrimary:!0});z.yf(d,c);c=b.T.N(z.Rna,{noteId:a.value});z.u(b.Z.put(c),function(){b.la.X(tPa(),{type:z.IC})})})};z.e.Xca=function(a){var b=this,c=oPa(),d=pPa();z.t(this.ta.hp(c,null,d),function(){var c=a.target,d=z.bz(FPa,{isPrimary:!1});z.yf(d,c);c=b.T.N(z.Sna,{replyId:a.value});z.u(b.Z.put(c),function(){b.la.X(uPa(),{type:z.IC})})})};z.e.sca=function(){U8(this,this.RC-1)};
z.e.u$=function(){U8(this,this.RC+1)};z.q(V8,z.Q);z.e=V8.prototype;z.e.R=function(){V8.V.R.call(this);var a=[];x8(this.$b)&&a.push(this.Pd.load(this.Ua));this.YV||(a.push(this.Vg.load(this.Ua)),a.push(this.Xg.load(this.Ua)));this.xq=z.t(z.t(z.t(z.AT(a),function(){this.xq=null},this),this.render,this),this.M6,this);z.IA(this,this.kb,"resize-end",this.$e,this)};z.e.ma=function(){this.xq&&this.xq.cancel();V8.V.ma.call(this)};z.e.ib=function(){this.xq=null;V8.V.ib.call(this)};z.e.render=function(){mPa(this.Bd,function(a,b){W8(this,b)},this)};
z.e.$e=function(){mPa(this.Bd,function(a,b){TPa(this,b)},this)};z.e.M6=function(){var a=this.Vg.Zm;z.IA(this,a,"add",this.VW,this);z.IA(this,a,"remove",this.VW,this);(a=u8(this.Xg))&&z.IA(this,a,"add",this.Taa,this)};z.e.VW=function(a){NPa(this,Object.keys(z.iA(this.Vg,a instanceof Array?a:[a])||{}))};z.e.Taa=function(a){NPa(this,(a instanceof Array?a:[a]).map(this.Xg.mP,this.Xg))};z.e.Fm=function(a){var b=window.document.createElement("div");b.className="notesMarkers";a.appendChild(b);return b};
z.e.cy=function(a,b){z.qb(a,{startIndex:Math.min(a.startIndex,b.startIndex),endIndex:Math.max(a.endIndex,b.endIndex),notes:a.notes.concat(b.notes),quotes:a.quotes.concat(b.quotes),responses:a.responses.concat(b.responses)})};z.q(X8,z.Q);z.e=X8.prototype;
z.e.R=function(){X8.V.R.call(this);this.wa(this.xa.L(),"click",this.f$,this,!0);z.O(this.ay).S("select-anchor",this.fba,this);var a=this.$b.Ca();if(a.Jr()&&!this.$b.Ub()){var b=z.aR(a),b=2==a.visibility&&b;a.allowResponses&&!b&&z.u(this.Xg.load(this.$b.oa(),"best"),z.Qz);z.u(this.Vg.load(this.$b.oa()),z.Qz)}a.Vl().Cr()&&(this.CD=z.t(this.Pd.load(this.$b.oa()),this.Eaa,this));this.lL&&Z8(this,null);z.IA(this,this.Oa,"historyUpdate",function(){Z8(this,K8())},this);this.od&&z.IA(this,this.od,"highlight",
this.Caa,this)};z.e.ib=function(){z.gq(this.Pf);this.Pf=null;z.gq(this.Wi);this.Wi=null;this.ay&&z.O(this.ay).clear("select-anchor");this.CD&&this.CD.cancel();this.CD=null;X8.V.ib.call(this)};z.e.Fka=function(){this.Pf&&this.Pf.$e()};z.e.Wl=function(){if(!this.Wi)return!1;var a=this.Wi.Na();return a?a.Wl():!1};z.e.zaa=function(a){a.subscribe("add",this.sY,this);a.subscribe("remove",this.sY,this)};z.e.sY=function(a){(z.ma(a)?a:[a]).forEach(function(a){W8(this.Pf,a.wd())},this)};
z.e.Eaa=function(){var a=(0,z.Ia)();this.CD=null;Z8(this,K8());this.wa(this.gC,z.qK,this.WL,this);z.zB(z.jra,(0,z.Ia)()-a)};z.e.WL=function(a){(a=a.target.getAttribute("name"))&&J8(this.Bd,a)&&TPa(this.Pf,a)};z.e.Caa=function(){if(this.od){var a=ZPa(this,this.od.EE);this.od.Bn();a&&(a=a.highlight,this.MX(a.anchor,a),Y8(this,a.anchor,a))}};
z.e.f$=function(a){if(this.Wi){var b=a.target;if(!z.Df(this.Wi.L(),b)){var c=this.Wi.Na(),d;if(!(d=!c)){a:if(c.be&&c.be.Na())c=!0;else{d=z.hb(c.zh);for(var f=0;f<d.length;f++)if(d[f]&&d[f].Na()){c=!0;break a}c=c.gf&&!c.gf.kh()?!0:!1}d=!c}d&&(c=this.Wi&&this.Wi.yk,d="select-anchor"==b.getAttribute("data-action"),this.IM(),c&&d&&z.Df(c,b)&&a.stopPropagation())}}};
z.e.pk=function(a){if(!(767>=window.innerWidth)){var b=a.yk,c=z.rz(b);a.wi();a=a.L();var d=z.rz(a),f=window.innerHeight,g=window.innerWidth,k=this.xa.query(".js-metabar"),m=0;k&&(m=z.rz(k).height);d.height>=f-m?dPa(a):(z.nz(b),b=c.top+d.height>=f?z.oz().top+f-d.height-10:z.nz(b),c=z.rz(this.ay).left+10,c+d.width>=g&&(c=g-d.width-10),a.style.top=b+"px",a.style.left=c+"px")}};z.e.IM=function(){z.gq(this.Wi);this.Wi=null};
z.e.fba=function(a){var b=z.St(a.target,function(a){return z.Uc(a,"js-paragraphControl")},this.$W),b=UPa(this.Pf,a.value,b);Y8(this,a.value,null,null,null,b)};z.e.MX=function(a,b){if(this.$b.Ub()){var c=z.DP();this.lE=(c=c&&nPa(this.Bd,c.he()))&&new M8(c)}YPa(this,a,b)};z.e.cda=function(a,b){YPa(this,a,b);this.$b.Ub()&&this.lE&&(a=this.lE.restore())&&a.select();this.lE=null};
z.e.Ky=function(a){if(this.Bd&&(a=J8(this.Bd,a))){a=Math.max(z.nz(a),0);var b=z.QB(this.xa);this.Rw&&this.Rw.cancel();this.Rw=new z.LS(b,"scrollTop",600,a)}};$Pa.prototype.Qfa=function(a,b,c){return new X8(a,b,c)};z.l($8,z.Q);z.e=$8.prototype;z.e.Ha=function(a){this.ba=a};z.e.pH=function(a){this.Uf=a};z.e.wR=function(a){this.Um=a};z.e.R=function(){this.L()?(z.Q.prototype.R.call(this),z.O(this.L()).S("show-responses-stream-editor",this.sba,this).S("show-other-responses",this.MA,this),z.$y(this.L(),this.Uf,{post:this.ba,sg:this.Um}),this.ba.Jr()&&z.u(z.t(z.t(z.t(POa(this.Fb,this.ba.bb(),"best"),this.wX.bind(this,"best")),this.Qca,this),function(){this.SN.NR&&this.MA()},this),z.Qz)):z.Qz("Attempted to initialize ResponsesStreamControl without root element.")};
z.e.ma=function(){z.O(this.L()).clear("show-other-responses");z.Q.prototype.ma.call(this)};z.e.wX=function(a,b){this.isActive()&&(b=b.sh,"best"==a?(a=this.query(".js-responsesStream"),z.IA(this,b,"add",this.xW.bind(this,b)),this.xW(b)):a=this.query(".js-responsesStreamOther"),b&&(z.YQ()||0<b.Yd())&&a&&(z.$y(a,z.vV,{items:z.fA(b),context:2}),b=new z.xU(this.O,b),b.Fa(a),b.qe(2),this.track(b),z.Yt(this.query(".js-responsesStreamWrapper"))),this.RX&&(a=z.nz(a),z.kz(window.document.body,0,a)))};
z.e.Qca=function(){var a=this.query(".js-inlineNewPostControl"),b=this.query(".js-responsesLoggedOutPrompt");z.YQ()?a?(this.gf=z.Y1(NOa((new z.X1(this.O)).jH("web-inline-post-response").EA(this.ba.bb()),z.Zy(z.Kl,{post:this.ba,uA:!0})),this.iN).Fa(a),this.track(this.gf)):b&&this.iN&&(a=z.mz(b),b=z.nz(b),z.kz(a,0,b)):b&&z.Vc(b,"u-hide")};
z.e.MA=function(){this.aM||(this.aM=z.Ec(z.t(z.t(POa(this.Fb,this.ba.bb(),"other"),this.wX.bind(this,"other")),function(){z.Xt(this.query(".js-showOtherResponses"));this.SN.NR=!0},this),function(){this.aM=null},this))};z.e.xW=function(a){(a=a.hi)&&a.next&&"other"==a.next.filter&&!this.SN.NR&&(z.Yt(this.query(".js-responsesStreamWrapper")),z.Yt(this.query(".js-showOtherResponses")))};z.e.Wu=function(){this.gf&&(z.mT(this.gf.L(),new z.hr(60,0,200,0)),this.gf.Wu())};
z.e.sba=function(){var a=this.query(".js-responsesStreamEditor"),b=this.query(".js-showResponsesStreamEditorButton");z.Zt(a)&&(z.Yt(a),z.Xt(b),this.Wu())};z.l(a9,z.xF);a9.prototype.iO=function(){return null!=this.nX&&this.nX.Wl()?new z.rB(String(z.QT())):null};z.l(b9,z.Q);z.e=b9.prototype;z.e.wR=function(a){this.Um=a};z.e.R=function(){z.Q.prototype.R.call(this);this.qy=K8();this.Od=new z.GA;this.Oca||cQa(this)};z.e.ma=function(){z.gq(this.Od);this.Od=null;z.Q.prototype.ma.call(this)};z.e.MA=function(){this.Yg&&this.Yg.MA()};z.e.EU=function(a){return this.Od.track(z.Lr(a))};var bQa="supplemental-content-loaded";z.l(c9,z.wU);c9.prototype.R=function(){var a=this;z.wU.prototype.R.call(this);this.ba=this.le()?this.le().post:null;this.$b=new z.t2(this.Ba(),this.ba,!1);this.iu=new b9(this.Ba(),this.Ua,this.$b,!0,!0);this.iu.Fa(this.L());this.iu.wR(!0);z.t(aQa(this.iu),function(){a.iu.MA()});this.track(this.iu);z.tB(z.fqa,{postId:this.Ua})};c9.prototype.Jd=function(){var a=this.Ba();this.track(new z.E1(a));this.track(new z.D1(a))};var fQa=z.VA,gQa=fQa.Ba();z.ZA(gQa.scope("screen").add("quote-responses",$Pa).add("responses-stream-control",$8).add("notes-data",D8),"PostSidebar",I8);z.ZA(gQa.scope("app").add("twitter",function(a){this.Z=a.get("request");this.T=a.get("route-builder");this.O=a}),"StandaloneResponsesScreen",c9);z.FQ(fQa,"notes");}).call(this, _mdm);
